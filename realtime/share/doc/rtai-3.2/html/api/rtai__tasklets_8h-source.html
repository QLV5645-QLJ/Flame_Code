<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTAI API: base/include/rtai_tasklets.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">base</a>&nbsp;/&nbsp;<a class="el" href="dir_000014.html">include</a></div>
<h1>rtai_tasklets.h</h1><a href="rtai__tasklets_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00026 <span class="preprocessor">#ifndef _RTAI_TASKLETS_H</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define _RTAI_TASKLETS_H</span>
00028 <span class="preprocessor"></span>
00033 <span class="preprocessor">#include &lt;rtai_types.h&gt;</span>
00034 
00035 <span class="preprocessor">#define TSKIDX  1</span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#define INIT             0</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define DELETE           1</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define TASK_INSERT      2</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#define TASK_REMOVE      3</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define USE_FPU          4</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#define TIMER_INSERT     5</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#define TIMER_REMOVE     6</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define SET_TASKLETS_PRI 7</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define SET_FIR_TIM      8      </span>
00046 <span class="preprocessor"></span><span class="preprocessor">#define SET_PER          9</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define SET_HDL         10</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define SET_DAT         11</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define EXEC_TASKLET    12</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define WAIT_IS_HARD    13</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#define SET_TSK_PRI     14</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define REG_TASK        15</span>
00053 <span class="preprocessor"></span>
00054 <span class="keyword">struct </span>rt_task_struct;
00055 
00056 <span class="keyword">struct </span>rt_tasklet_struct {
00057 
00058     <span class="keyword">struct </span>rt_tasklet_struct *next, *prev;
00059     <span class="keywordtype">int</span> priority, uses_fpu;
00060     RTIME firing_time, period;
00061     void (*handler)(<span class="keywordtype">unsigned</span> long);
00062     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data, id;
00063     <span class="keywordtype">int</span> thread;
00064     <span class="keyword">struct </span>rt_task_struct *task;
00065     <span class="keyword">struct </span>rt_tasklet_struct *usptasklet;
00066 };
00067 
00068 <span class="preprocessor">#define TASKLET_STACK_SIZE  8196</span>
00069 <span class="preprocessor"></span>
00070 <span class="preprocessor">#ifdef __KERNEL__</span>
00071 <span class="preprocessor"></span>
00072 <span class="preprocessor">#ifdef __cplusplus</span>
00073 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00074 <span class="preprocessor">#endif </span><span class="comment">/* !__cplusplus */</span>
00075 
00076 <span class="keywordtype">int</span> __rtai_tasklets_init(<span class="keywordtype">void</span>);
00077 
00078 <span class="keywordtype">void</span> __rtai_tasklets_exit(<span class="keywordtype">void</span>);
00079 
00080 <span class="keyword">struct </span>rt_tasklet_struct *<a class="code" href="group__tasklets.html#ga9">rt_init_tasklet</a>(<span class="keywordtype">void</span>);
00081 
00082 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#ga10">rt_delete_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet);
00083 
00084 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#ga19">rt_insert_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00085                       <span class="keywordtype">int</span> priority,
00086                       <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00087                       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
00088                       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">id</span>,
00089                       <span class="keywordtype">int</span> pid);
00090 
00091 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#ga21">rt_remove_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet);
00092 
00093 <span class="keyword">struct </span>rt_tasklet_struct *<a class="code" href="group__tasklets.html#ga25">rt_find_tasklet_by_id</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">id</span>);
00094 
00095 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#ga22">rt_exec_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet);
00096 
00097 <span class="keywordtype">void</span> rt_set_tasklet_priority(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00098                              <span class="keywordtype">int</span> priority);
00099 
00100 <span class="keywordtype">int</span> rt_set_tasklet_handler(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00101                            <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>));
00102 
00103 <span class="preprocessor">#define rt_fast_set_tasklet_handler(t, h) do { (t)-&gt;handler = (h); } while (0)</span>
00104 <span class="preprocessor"></span>
00105 <span class="keywordtype">void</span> rt_set_tasklet_data(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00106                          <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data);
00107 
00108 <span class="preprocessor">#define rt_fast_set_tasklet_data(t, d) \</span>
00109 <span class="preprocessor">do { \</span>
00110 <span class="preprocessor">   (t)-&gt;data = (d); \</span>
00111 <span class="preprocessor">} while (0)</span>
00112 <span class="preprocessor"></span>
00135 <span class="keyword">struct </span>rt_task_struct *rt_tasklet_use_fpu(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00136                                           <span class="keywordtype">int</span> use_fpu);
00137 
00154 <span class="preprocessor">#define rt_init_timer rt_init_tasklet </span>
00155 <span class="preprocessor"></span>
00172 <span class="preprocessor">#define rt_delete_timer rt_delete_tasklet</span>
00173 <span class="preprocessor"></span>
00174 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#ga11">rt_insert_timer</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00175                     <span class="keywordtype">int</span> priority,
00176                     RTIME firing_time,
00177                     RTIME period,
00178                     <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00179                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
00180                     <span class="keywordtype">int</span> pid);
00181 
00182 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#ga12">rt_remove_timer</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer);
00183 
00184 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#ga13">rt_set_timer_priority</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00185                            <span class="keywordtype">int</span> priority);
00186 
00187 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#ga14">rt_set_timer_firing_time</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00188                               RTIME firing_time);
00189 
00190 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#ga15">rt_set_timer_period</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00191                          RTIME period);
00192 
00193 <span class="preprocessor">#define rt_fast_set_timer_period(t, p) \</span>
00194 <span class="preprocessor">do { \</span>
00195 <span class="preprocessor">   (t)-&gt;period = (p); \</span>
00196 <span class="preprocessor">} while (0)</span>
00197 <span class="preprocessor"></span>
00221 <span class="preprocessor">#define rt_set_timer_handler rt_set_tasklet_handler</span>
00222 <span class="preprocessor"></span>
00223 <span class="preprocessor">#define rt_fast_set_timer_handler(t, h) do { (t)-&gt;handler = (h); } while (0)</span>
00224 <span class="preprocessor"></span>
00247 <span class="preprocessor">#define rt_set_timer_data rt_set_tasklet_data</span>
00248 <span class="preprocessor"></span>
00249 <span class="preprocessor">#define rt_fast_set_timer_data(t, d) do { (t)-&gt;data = (d); } while (0)</span>
00250 <span class="preprocessor"></span>
00251 <span class="preprocessor">#define rt_timer_use_fpu rt_tasklet_use_fpu</span>
00252 <span class="preprocessor"></span>
00253 <span class="keywordtype">void</span> rt_wait_tasklet_is_hard(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00254                              <span class="keywordtype">int</span> thread);
00255 
00256 <span class="keywordtype">void</span> rt_register_task(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00257                       <span class="keyword">struct</span> rt_tasklet_struct *usptasklet,
00258                       <span class="keyword">struct</span> rt_task_struct *task);
00259  
00260 <span class="preprocessor">#ifdef __cplusplus</span>
00261 <span class="preprocessor"></span>}
00262 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00263 
00264 <span class="preprocessor">#else </span><span class="comment">/* !__KERNEL__ */</span>
00265 
00266 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00267 <span class="preprocessor">#include &lt;sys/wait.h&gt;</span>
00268 <span class="preprocessor">#include &lt;sys/mman.h&gt;</span>
00269 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00270 
00271 <span class="preprocessor">#include &lt;rtai_usi.h&gt;</span>
00272 <span class="preprocessor">#include &lt;<a class="code" href="rtai__lxrt_8h.html">rtai_lxrt.h</a>&gt;</span>
00273 
00274 <span class="preprocessor">#ifndef __SUPPORT_TASKLET__</span>
00275 <span class="preprocessor"></span><span class="preprocessor">#define __SUPPORT_TASKLET__</span>
00276 <span class="preprocessor"></span>
00277 <span class="keyword">static</span> <span class="keywordtype">int</span> support_tasklet(<span class="keywordtype">void</span> *tasklet)
00278 {
00279         RT_TASK *task;
00280         <span class="keyword">struct </span>rt_tasklet_struct usptasklet;
00281         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">void</span> *handler; } arg = { tasklet, };
00282 
00283         <span class="keywordflow">if</span> (!(task = rt_thread_init((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)arg.tasklet, 98, 0, SCHED_FIFO, 0xF))) {
00284                 printf(<span class="stringliteral">"CANNOT INIT SUPPORT TASKLET\n"</span>);
00285                 <span class="keywordflow">return</span> -1;
00286         } <span class="keywordflow">else</span> {
00287                 <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet, *usptasklet; RT_TASK *task; } reg = { arg.tasklet, &amp;usptasklet, task };
00288                 rtai_lxrt(TSKIDX, <span class="keyword">sizeof</span>(reg), REG_TASK, &amp;reg);
00289         }
00290 
00291         mlockall(MCL_CURRENT | MCL_FUTURE);
00292         <a class="code" href="group__lxrt.html#ga76">rt_make_hard_real_time</a>();
00293         <span class="keywordflow">while</span> (1) {
00294                 rt_task_suspend(task);
00295                 <span class="keywordflow">if</span> ((arg.handler = (<span class="keywordtype">void</span>*)usptasklet.handler)) {
00296                         rtai_lxrt(TSKIDX, SIZARG, SET_HDL, &amp;arg);
00297                         usptasklet.handler(usptasklet.data);
00298                 } <span class="keywordflow">else</span> {
00299                         <span class="keywordflow">break</span>;
00300                 }
00301         }
00302         rtai_sti();
00303         <a class="code" href="group__lxrt.html#ga13">rt_make_soft_real_time</a>();
00304         rt_task_delete(task);
00305 
00306         <span class="keywordflow">return</span> 0;
00307 }
00308 <span class="preprocessor">#endif </span><span class="comment">/* __SUPPORT_TASKLET__ */</span>
00309 
00310 <span class="preprocessor">#ifdef __cplusplus</span>
00311 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00312 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00313 
<a name="l00314"></a><a class="code" href="group__tasklets.html#ga9">00314</a> RTAI_PROTO(<span class="keyword">struct</span> rt_tasklet_struct *, <a class="code" href="group__tasklets.html#ga9">rt_init_tasklet</a>,(<span class="keywordtype">void</span>))
00315 {
00316         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *tasklet; <span class="keywordtype">int</span> thread; } arg;
00317 
00318         arg.tasklet = (<span class="keyword">struct </span>rt_tasklet_struct*)rtai_lxrt(TSKIDX, SIZARG, INIT, &amp;arg).v[LOW];
00319         arg.thread = rt_thread_create(support_tasklet, arg.tasklet, TASKLET_STACK_SIZE);
00320 <span class="comment">//      arg.thread = clone(support_tasklet, sp + TASKLET_STACK_SIZE - 1, CLONE_VM | CLONE_FS | CLONE_FILES, arg.tasklet);</span>
00321         rtai_lxrt(TSKIDX, SIZARG, WAIT_IS_HARD, &amp;arg);
00322 
00323         <span class="keywordflow">return</span> arg.tasklet;
00324 }
00325 
00326 <span class="preprocessor">#define rt_init_timer rt_init_tasklet</span>
00327 <span class="preprocessor"></span>
<a name="l00328"></a><a class="code" href="group__tasklets.html#ga10">00328</a> RTAI_PROTO(<span class="keywordtype">void</span>, <a class="code" href="group__tasklets.html#ga10">rt_delete_tasklet</a>,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet))
00329 {
00330         <span class="keywordtype">int</span> thread;
00331         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; } arg = { tasklet };
00332         <span class="keywordflow">if</span> ((thread = rtai_lxrt(TSKIDX, SIZARG, DELETE, &amp;arg).i[LOW])) {
00333                 rt_thread_join(thread);
00334         }
00335 }
00336 
00337 <span class="preprocessor">#define rt_delete_timer rt_delete_tasklet</span>
00338 <span class="preprocessor"></span>
00339 RTAI_PROTO(<span class="keywordtype">int</span>, <a class="code" href="group__tasklets.html#ga11">rt_insert_timer</a>,(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00340                                  <span class="keywordtype">int</span> priority,
00341                                  RTIME firing_time,
00342                                  RTIME period,
00343                                  <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00344                                  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
<a name="l00345"></a><a class="code" href="group__tasklets.html#ga11">00345</a>                                  <span class="keywordtype">int</span> pid))
00346 {
00347         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; <span class="keywordtype">int</span> priority; RTIME firing_time;
00348             RTIME period; void (*handler)(<span class="keywordtype">unsigned</span> long); <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data; <span class="keywordtype">int</span> pid; } arg =
00349                 { timer, priority, firing_time, period, handler, data, pid };
00350         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, TIMER_INSERT, &amp;arg).i[LOW];
00351 }
00352 
<a name="l00353"></a><a class="code" href="group__tasklets.html#ga12">00353</a> RTAI_PROTO(<span class="keywordtype">void</span>, <a class="code" href="group__tasklets.html#ga12">rt_remove_timer</a>,(<span class="keyword">struct</span> rt_tasklet_struct *timer))
00354 {
00355         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; } arg = { timer };
00356         rtai_lxrt(TSKIDX, SIZARG, TIMER_REMOVE, &amp;arg);
00357 }
00358 
<a name="l00359"></a><a class="code" href="group__tasklets.html#ga13">00359</a> RTAI_PROTO(<span class="keywordtype">void</span>, <a class="code" href="group__tasklets.html#ga13">rt_set_timer_priority</a>,(<span class="keyword">struct</span> rt_tasklet_struct *timer, <span class="keywordtype">int</span> priority))
00360 {
00361         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; <span class="keywordtype">int</span> priority; } arg = { timer, priority };
00362         rtai_lxrt(TSKIDX, SIZARG, SET_TASKLETS_PRI, &amp;arg);
00363 }
00364 
<a name="l00365"></a><a class="code" href="group__tasklets.html#ga14">00365</a> RTAI_PROTO(<span class="keywordtype">void</span>, <a class="code" href="group__tasklets.html#ga14">rt_set_timer_firing_time</a>,(<span class="keyword">struct</span> rt_tasklet_struct *timer, RTIME firing_time))
00366 {
00367         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; RTIME firing_time; } arg = { timer, firing_time };
00368         rtai_lxrt(TSKIDX, SIZARG, SET_FIR_TIM, &amp;arg);
00369 }
00370 
<a name="l00371"></a><a class="code" href="group__tasklets.html#ga15">00371</a> RTAI_PROTO(<span class="keywordtype">void</span>, <a class="code" href="group__tasklets.html#ga15">rt_set_timer_period</a>,(<span class="keyword">struct</span> rt_tasklet_struct *timer, RTIME period))
00372 {
00373         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; RTIME period; } arg = { timer, period };
00374         rtai_lxrt(TSKIDX, SIZARG, SET_PER, &amp;arg);
00375 }
00376 
00377 RTAI_PROTO(<span class="keywordtype">int</span>, rt_set_tasklet_handler,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)))
00378 {
00379         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; void (*handler)(<span class="keywordtype">unsigned</span> long); } arg = { tasklet, handler };
00380         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, SET_HDL, &amp;arg).i[LOW];
00381 }
00382 
00383 <span class="preprocessor">#define rt_set_timer_handler rt_set_tasklet_handler</span>
00384 <span class="preprocessor"></span>
00385 RTAI_PROTO(<span class="keywordtype">void</span>, rt_set_tasklet_data,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data))
00386 {
00387         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data; } arg = { tasklet, data };
00388         rtai_lxrt(TSKIDX, SIZARG, SET_DAT, &amp;arg);
00389 }
00390 
00391 <span class="preprocessor">#define rt_set_timer_data rt_set_tasklet_data</span>
00392 <span class="preprocessor"></span>
00393 RTAI_PROTO(RT_TASK *, rt_tasklet_use_fpu,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">int</span> use_fpu))
00394 {
00395         RT_TASK *task;
00396         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">int</span> use_fpu; } arg = { tasklet, use_fpu };
00397         <span class="keywordflow">if</span> ((task = (RT_TASK*)rtai_lxrt(TSKIDX, SIZARG, USE_FPU, &amp;arg).v[LOW])) {
00398                 rt_task_use_fpu(task, use_fpu);
00399         }
00400         <span class="keywordflow">return</span> task;
00401 }
00402 
00403 <span class="preprocessor">#define rt_timer_use_fpu rt_tasklet_use_fpu</span>
00404 <span class="preprocessor"></span>
00405 RTAI_PROTO(<span class="keywordtype">int</span>, <a class="code" href="group__tasklets.html#ga19">rt_insert_tasklet</a>,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00406                                    <span class="keywordtype">int</span> priority,
00407                                    <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00408                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
00409                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">id</span>,
<a name="l00410"></a><a class="code" href="group__tasklets.html#ga19">00410</a>                                    <span class="keywordtype">int</span> pid))
00411 {
00412         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">int</span> priority; void (*handler)(<span class="keywordtype">unsigned</span> long);
00413             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> id; <span class="keywordtype">int</span> pid; } arg = { tasklet, priority, handler, data, id, pid };
00414         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, TASK_INSERT, &amp;arg).i[LOW];
00415 }
00416 
00417 RTAI_PROTO(<span class="keywordtype">void</span>, rt_set_tasklet_priority,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">int</span> priority))
00418 {
00419         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">int</span> priority; } arg = { tasklet, priority };
00420         rtai_lxrt(TSKIDX, SIZARG, SET_TSK_PRI, &amp;arg);
00421 }
00422 
<a name="l00423"></a><a class="code" href="group__tasklets.html#ga21">00423</a> RTAI_PROTO(<span class="keywordtype">void</span>, <a class="code" href="group__tasklets.html#ga21">rt_remove_tasklet</a>,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet))
00424 {
00425         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; } arg = { tasklet };
00426         rtai_lxrt(TSKIDX, SIZARG, TASK_REMOVE, &amp;arg);
00427 }
00428 
<a name="l00429"></a><a class="code" href="group__tasklets.html#ga22">00429</a> RTAI_PROTO(<span class="keywordtype">int</span>, <a class="code" href="group__tasklets.html#ga22">rt_exec_tasklet</a>,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet))
00430 {
00431         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; } arg = { tasklet };
00432         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, EXEC_TASKLET, &amp;arg).i[LOW];
00433 }
00434 
00435 <span class="preprocessor">#ifdef __cplusplus</span>
00436 <span class="preprocessor"></span>}
00437 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00438 
00439 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
00440 
00443 <span class="preprocessor">#endif </span><span class="comment">/* !_RTAI_TASKLETS_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Nov 17 12:29:19 2005 for RTAI API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
